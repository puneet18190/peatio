peatio:amqp:trade_executor:1: process with pid 21222 started.
/home/deploy/.rbenv/versions/2.2.1/lib/ruby/gems/2.2.0/gems/actionpack-4.0.12/lib/action_dispatch/http/mime_type.rb:167: warning: already initialized constant Mime::PDF
/home/deploy/.rbenv/versions/2.2.1/lib/ruby/gems/2.2.0/gems/actionpack-4.0.12/lib/action_dispatch/http/mime_type.rb:167: warning: previous definition of PDF was here
I, [2017-12-31T23:32:11.941406 #21222]  INFO -- : Connected to AMQP broker (prefetch: 5)
I, [2017-12-31T23:32:11.947364 #21222]  INFO -- : Received: {"market_id":"ltcbtc","ask_id":128,"bid_id":67,"strike_price":"0.0003","volume":"0.037","funds":"0.0000111","locale":"en"}
F, [2017-12-31T23:32:12.643912 #21222] FATAL -- : invalid lock amount (amount: 0.0000111, locked: 0.0000111, self.locked: 0.0) (Account::LockedError)
/home/deploy/blocksgate/app/models/account.rb:75:in `unlock_and_sub_funds'
/home/deploy/blocksgate/app/models/account.rb:45:in `call'
/home/deploy/blocksgate/app/models/account.rb:45:in `block (2 levels) in after'
/home/deploy/blocksgate/app/models/order.rb:67:in `strike'
/home/deploy/blocksgate/app/models/matching/executor.rb:60:in `block in create_trade_and_strike_orders'
/home/deploy/.rbenv/versions/2.2.1/lib/ruby/gems/2.2.0/gems/activerecord-4.0.12/lib/active_record/connection_adapters/abstract/database_statements.rb:203:in `block in transaction'
/home/deploy/.rbenv/versions/2.2.1/lib/ruby/gems/2.2.0/gems/activerecord-4.0.12/lib/active_record/connection_adapters/abstract/database_statements.rb:211:in `within_new_transaction'
/home/deploy/.rbenv/versions/2.2.1/lib/ruby/gems/2.2.0/gems/activerecord-4.0.12/lib/active_record/connection_adapters/abstract/database_statements.rb:203:in `transaction'
/home/deploy/.rbenv/versions/2.2.1/lib/ruby/gems/2.2.0/gems/activerecord-4.0.12/lib/active_record/transactions.rb:209:in `transaction'
/home/deploy/blocksgate/app/models/matching/executor.rb:49:in `create_trade_and_strike_orders'
/home/deploy/blocksgate/app/models/matching/executor.rb:15:in `block in execute!'
/home/deploy/blocksgate/app/models/matching/executor.rb:34:in `call'
/home/deploy/blocksgate/app/models/matching/executor.rb:34:in `retry_on_error'
/home/deploy/blocksgate/app/models/matching/executor.rb:15:in `execute!'
/home/deploy/blocksgate/app/models/worker/trade_executor.rb:6:in `process'
/home/deploy/blocksgate/lib/daemons/amqp_daemon.rb:61:in `block (2 levels) in <top (required)>'
/home/deploy/.rbenv/versions/2.2.1/lib/ruby/gems/2.2.0/gems/bunny-1.2.1/lib/bunny/consumer.rb:56:in `call'
/home/deploy/.rbenv/versions/2.2.1/lib/ruby/gems/2.2.0/gems/bunny-1.2.1/lib/bunny/consumer.rb:56:in `call'
/home/deploy/.rbenv/versions/2.2.1/lib/ruby/gems/2.2.0/gems/bunny-1.2.1/lib/bunny/channel.rb:1672:in `block in handle_frameset'
/home/deploy/.rbenv/versions/2.2.1/lib/ruby/gems/2.2.0/gems/bunny-1.2.1/lib/bunny/consumer_work_pool.rb:84:in `call'
/home/deploy/.rbenv/versions/2.2.1/lib/ruby/gems/2.2.0/gems/bunny-1.2.1/lib/bunny/consumer_work_pool.rb:84:in `block (2 levels) in run_loop'
/home/deploy/.rbenv/versions/2.2.1/lib/ruby/gems/2.2.0/gems/bunny-1.2.1/lib/bunny/consumer_work_pool.rb:80:in `loop'
/home/deploy/.rbenv/versions/2.2.1/lib/ruby/gems/2.2.0/gems/bunny-1.2.1/lib/bunny/consumer_work_pool.rb:80:in `block in run_loop'
/home/deploy/.rbenv/versions/2.2.1/lib/ruby/gems/2.2.0/gems/bunny-1.2.1/lib/bunny/consumer_work_pool.rb:79:in `catch'
/home/deploy/.rbenv/versions/2.2.1/lib/ruby/gems/2.2.0/gems/bunny-1.2.1/lib/bunny/consumer_work_pool.rb:79:in `run_loop'
F, [2017-12-31T23:32:12.643984 #21222] FATAL -- : /home/deploy/blocksgate/app/models/account.rb:75:in `unlock_and_sub_funds'
/home/deploy/blocksgate/app/models/account.rb:45:in `call'
/home/deploy/blocksgate/app/models/account.rb:45:in `block (2 levels) in after'
/home/deploy/blocksgate/app/models/order.rb:67:in `strike'
/home/deploy/blocksgate/app/models/matching/executor.rb:60:in `block in create_trade_and_strike_orders'
/home/deploy/.rbenv/versions/2.2.1/lib/ruby/gems/2.2.0/gems/activerecord-4.0.12/lib/active_record/connection_adapters/abstract/database_statements.rb:203:in `block in transaction'
/home/deploy/.rbenv/versions/2.2.1/lib/ruby/gems/2.2.0/gems/activerecord-4.0.12/lib/active_record/connection_adapters/abstract/database_statements.rb:211:in `within_new_transaction'
/home/deploy/.rbenv/versions/2.2.1/lib/ruby/gems/2.2.0/gems/activerecord-4.0.12/lib/active_record/connection_adapters/abstract/database_statements.rb:203:in `transaction'
/home/deploy/.rbenv/versions/2.2.1/lib/ruby/gems/2.2.0/gems/activerecord-4.0.12/lib/active_record/transactions.rb:209:in `transaction'
/home/deploy/blocksgate/app/models/matching/executor.rb:49:in `create_trade_and_strike_orders'
/home/deploy/blocksgate/app/models/matching/executor.rb:15:in `block in execute!'
/home/deploy/blocksgate/app/models/matching/executor.rb:34:in `call'
/home/deploy/blocksgate/app/models/matching/executor.rb:34:in `retry_on_error'
/home/deploy/blocksgate/app/models/matching/executor.rb:15:in `execute!'
/home/deploy/blocksgate/app/models/worker/trade_executor.rb:6:in `process'
/home/deploy/blocksgate/lib/daemons/amqp_daemon.rb:61:in `block (2 levels) in <top (required)>'
/home/deploy/.rbenv/versions/2.2.1/lib/ruby/gems/2.2.0/gems/bunny-1.2.1/lib/bunny/consumer.rb:56:in `call'
/home/deploy/.rbenv/versions/2.2.1/lib/ruby/gems/2.2.0/gems/bunny-1.2.1/lib/bunny/consumer.rb:56:in `call'
/home/deploy/.rbenv/versions/2.2.1/lib/ruby/gems/2.2.0/gems/bunny-1.2.1/lib/bunny/channel.rb:1672:in `block in handle_frameset'
/home/deploy/.rbenv/versions/2.2.1/lib/ruby/gems/2.2.0/gems/bunny-1.2.1/lib/bunny/consumer_work_pool.rb:84:in `call'
/home/deploy/.rbenv/versions/2.2.1/lib/ruby/gems/2.2.0/gems/bunny-1.2.1/lib/bunny/consumer_work_pool.rb:84:in `block (2 levels) in run_loop'
/home/deploy/.rbenv/versions/2.2.1/lib/ruby/gems/2.2.0/gems/bunny-1.2.1/lib/bunny/consumer_work_pool.rb:80:in `loop'
/home/deploy/.rbenv/versions/2.2.1/lib/ruby/gems/2.2.0/gems/bunny-1.2.1/lib/bunny/consumer_work_pool.rb:80:in `block in run_loop'
/home/deploy/.rbenv/versions/2.2.1/lib/ruby/gems/2.2.0/gems/bunny-1.2.1/lib/bunny/consumer_work_pool.rb:79:in `catch'
/home/deploy/.rbenv/versions/2.2.1/lib/ruby/gems/2.2.0/gems/bunny-1.2.1/lib/bunny/consumer_work_pool.rb:79:in `run_loop'
